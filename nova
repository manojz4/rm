First do in slurm.conf
-AccountingStorageEnforce=limits,associations
-AccountingStorageType=accounting_storage/slurmdbd
Do systemctl to all nodes

*for idling the node
scontrol update nodename=compute-2 state=idle
--
ONE(nova)
create user(on all nodes)
- groupadd -g 2001 rma
- useradd -u 2002 -g 2001 -m -d /nfs/hpcsa1 -s /bin/bash hpcsa1

create account in slurm
-sacctmgr add account rmalab-acc

assign user to account
-sacctmgr create user name=name=hpcsa1 DefaultAccount=rmalab-acc

open slurm.conf
-PartitionName=nova Nodes=ALL Default=YES MaxTime=25-00:00:00 DefaultTime=30:00:00 State=UP AllowGroups=rma AllowAccounts=rmalab-acc

restart all nodes
-sinfo
-scontrol show partition=nova
--
TWO (reserve_lab for nova)
(Do if not done freshly)
create user(on all nodes)
- groupadd -g 2001 rma
- useradd -u 2002 -g 2001 -m -d /nfs/hpcsa1 -s /bin/bash hpcsa1

create account in slurm
-sacctmgr add account rmalab-acc

assign user to account
-sacctmgr create user name=hpcsa1 DefaultAccount=rmalab-acc

-scontrol create reservation=reserve_lab partition=nova nodes=all duration=60 user=-root starttime=now
take output
-
-su hpcsa1

--
output
-
-
-
---
THIRD(quantum)

---
FOUR(qos)
-slurm.conf (add)
-AccountingStorageEnforce=associations,limits,qos
do it in all nodes
-systemctl restart all nodes

-sacctmgr create qos zebra
-sacctmgr show qos
-sacctmgr modify qos where qos=zebra set MaxTRES=node=1
-sacctmgr modify user name=hpcsa1 set qos=zebra
















